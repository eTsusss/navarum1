# NAVARUM - Система управления товарами с авторизацией

Веб-приложение для торгово-производственной компании NAVARUM с системой авторизации пользователей и ролями администратора.

## Возможности

### Для всех пользователей:
- Просмотр каталога товаров
- Фильтрация по категориям (Полотенца, Пальто, Куртки, Свитера)
- Детальная информация о товарах
- Регистрация и авторизация

### Для администраторов:
- Добавление новых товаров
- Редактирование существующих товаров
- Удаление товаров
- Полное управление каталогом

## Технологии

### Backend:
- **Flask** - веб-фреймворк
- **SQLite** - база данных
- **JWT** - токены авторизации
- **bcrypt** - хеширование паролей
- **Flask-CORS** - поддержка CORS

### Frontend:
- **HTML5** - разметка
- **CSS3** - стили
- **JavaScript (ES6+)** - интерактивность
- **Font Awesome** - иконки

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone <repository-url>
cd navarum
```

### 2. Установка зависимостей сервера
```bash
cd server
pip install -r requirements.txt
```

### 3. Запуск сервера
```bash
python app.py
```
Сервер будет доступен по адресу: `http://localhost:5000`

### 4. Запуск клиента
Откройте файл `client/index.html` в браузере или запустите локальный сервер:

```bash
cd client
python -m http.server 8000
```
Клиент будет доступен по адресу: `http://localhost:8000`

## Структура проекта

```
navarum/
├── client/                 # Клиентская часть
│   ├── index.html         # Главная страница
│   ├── styles.css         # Стили
│   ├── script.js          # JavaScript логика
│   └── README.md          # Документация клиента
├── server/                # Серверная часть
│   ├── app.py             # Основной файл сервера
│   ├── requirements.txt   # Зависимости Python
│   └── README.md          # Документация сервера
└── README.md              # Основная документация
```

## API Endpoints

### Авторизация
- `POST /api/auth/register` - Регистрация пользователя
- `POST /api/auth/login` - Вход в систему
- `GET /api/auth/profile` - Получение профиля (требует токен)

### Товары (публичные)
- `GET /api/products` - Получение всех товаров
- `GET /api/products/<id>` - Получение товара по ID
- `GET /api/products/category/<category>` - Товары по категории
- `GET /api/categories` - Получение всех категорий

### Товары (только для администратора)
- `POST /api/admin/products` - Добавление товара
- `PUT /api/admin/products/<id>` - Обновление товара
- `DELETE /api/admin/products/<id>` - Удаление товара

## Учетные данные по умолчанию

При первом запуске автоматически создается администратор:

- **Логин:** `admin`
- **Пароль:** `admin123`
- **Email:** `admin@navarum.ru`
- **Роль:** `admin`

⚠️ **Важно:** В продакшене обязательно измените пароль администратора!

## Безопасность

### JWT Токены
- Токены действительны 24 часа
- Автоматическое обновление при каждом запросе
- Безопасное хранение в localStorage

### Пароли
- Хеширование с помощью bcrypt
- Минимальная длина пароля: 6 символов
- Проверка совпадения паролей при регистрации

### Защищенные маршруты
- Все административные функции требуют токен
- Проверка роли пользователя
- Автоматический выход при истечении токена

## Использование

### Регистрация нового пользователя
1. Нажмите кнопку "Регистрация" в навигации
2. Заполните форму (имя пользователя, email, пароль)
3. Нажмите "Зарегистрироваться"

### Вход в систему
1. Нажмите кнопку "Войти" в навигации
2. Введите логин и пароль
3. Нажмите "Войти"

### Управление товарами (для администратора)
1. Войдите как администратор
2. В разделе "Наша продукция" появятся кнопки управления
3. Используйте "Добавить товар" для создания новых товаров
4. Используйте "Управление товарами" для редактирования и удаления

## Настройка для продакшена

### 1. Изменение секретного ключа
В файле `server/app.py` измените:
```python
app.config['SECRET_KEY'] = 'your-secure-secret-key-here'
```

### 2. Изменение пароля администратора
После первого запуска измените пароль через базу данных или добавьте функцию смены пароля.

### 3. Настройка CORS
При необходимости настройте CORS для вашего домена:
```python
CORS(app, origins=['https://yourdomain.com'])
```

### 4. Использование production сервера
Замените встроенный сервер Flask на production сервер (например, Gunicorn):
```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

## Устранение неполадок

### Сервер не запускается
- Проверьте, что Python 3.7+ установлен
- Убедитесь, что все зависимости установлены
- Проверьте, что порт 5000 свободен

### Ошибки авторизации
- Проверьте правильность логина/пароля
- Убедитесь, что сервер запущен
- Проверьте консоль браузера на ошибки

### Товары не загружаются
- Проверьте подключение к серверу
- Убедитесь, что база данных создана
- Проверьте логи сервера

## Лицензия

Этот проект создан для демонстрационных целей.

## Поддержка

При возникновении проблем создайте issue в репозитории или обратитесь к разработчику. 